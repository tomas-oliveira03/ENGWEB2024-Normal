extends layout

block content
  .w3-card-4
    header.w3-container.w3-teal
        h1 Entidade: #{entidades[0].entidade_comunicante}
        h2 NIPC: #{entidades[0].NIPC_entidade_comunicante}


    - let totalPrecoContratual = 0
    each entidade in entidades
        - totalPrecoContratual += parseFloat(entidade.precoContratual.replace(',', '.'))
    h3 Total Preço: #{totalPrecoContratual.toFixed(2)}€

        


    .w3-container
        table.w3-table-all
            tr
                th id Contrato
                th Objecto Contrato
                th Data Celebracao Contrato
                th Preco Contratual
                th NIPC
                th Entidade Comunicante

            each entidade in entidades
                tr
                    td
                        a(href=`/${entidade.idcontrato}`) #{entidade.idcontrato}
                    td #{entidade.objectoContrato}
                    td #{entidade.dataCelebracaoContrato}
                    td #{entidade.precoContratual}
                    td 
                        a(href=`/entidades/${entidade.NIPC_entidade_comunicante}`) #{entidade.NIPC_entidade_comunicante}
                    td #{entidade.entidade_comunicante}
                

    
    footer.w3-container.w3-blue
        h5
            span Generated by EngWeb2024 in #{date} - [
                a(href='/') Return
            span ]

